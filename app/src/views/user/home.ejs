<!-- 예시: views/index.ejs -->
<!DOCTYPE html>
<html>
<head>
    <title>메인 페이지</title>
</head>
<body>
    <form action="/search" method="get">
        <label for="searchQuery">검색어:</label>
        <input id="searchQuery" type="text" name="searchQuery" required>
        <input id="searchBtn" type="submit" value="검색">
    </form>
    <h1>인기 있는 프로들</h1>
    <div id="popularProsList"></div>

    <script>
        // 서버에서 인기 있는 프로들의 데이터를 가져오는 함수
        async function fetchPopularPros() {
            try {
                const response = await fetch('/popular-pros');
                const popularPros = await response.json();
                displayPopularPros(popularPros);
            } catch (error) {
                console.error('인기 있는 프로들을 불러오는데 실패했습니다:', error);
            }
        }

        // 가져온 데이터를 화면에 표시하는 함수
        function displayPopularPros(pros) {
            const container = document.getElementById('popularProsList');
            container.innerHTML = '';
            pros.forEach(proStat => {
                const pro = proStat.pro; // 프로 객체 추출
                const div = document.createElement('div');
                div.innerHTML = `이름: ${pro.name}, 이메일: ${pro.email}, 평점: ${proStat.averageRating}`; // 이메일과 평균 평점 사용
                container.appendChild(div);
            });
        }


        // 페이지 로드 시 인기 있는 프로들을 불러옴
        fetchPopularPros();
    </script>
</body>
</html>


